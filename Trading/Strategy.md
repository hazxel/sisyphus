# 特征工程

量化投资中普遍采用人工挖掘因子，在组合因子这一特征工程的方式。这是因为：

1. 金融数据信噪比极低，如果没有特别经验性的 trick，end-to-end 学出来全是噪音
2. end-to-end 解释性差，出问题难以及时调整，无法风控
3. 无法向资方解释背后逻辑



# 因子

因子基本上就是一种资产价格的变动背后的影响因素。本质上都是此资产帐面数据的函数，我们希望因子能从逻辑上解释资产的涨跌。常见的因子有：

- 基本面因子：市值因子、收益率因子、利润因子等
- 趋势跟踪因子：动量因子
- 暂时不知道怎么归类的：低波动性因子、价值因子、成长因子等。

可解释性弱的因子，如用遗传算法挑选因子，这类做法可能会数据挖掘过度，出问题难以及时调整，无法风控。2021年底到2022年初幻方大幅回撤就跟这个有关。 从很多的业内前辈的心得来看，因子最核心的本质还是在于遵从定价原理，寻找经济学意义显著且可解释性强的因子。

如果一开始没有思路，摸不着门道，可以先看一下经典的因子论文，比如说《101 Formulaic Alphas》，它是WorldQuant（世坤投资）在2015年底发布的22页论文，其中记录了101个Alpha因子。

### 市值因子/收益率因子

市值，收益率都需要取对数。原理是分布呈positive skew，需要修正。

### 动量因子/反转因子

绝大多数采用月度和年度数据的研究表明我国股市并不存在显著的动量效应，甚至存在较强的反转特征。大多数情况下A股市场存在显著的反转效应，仅在超高频率下存在动量效应。可用于组合趋势跟踪策略





# 因子有效性检验

### 自相关性

计算每一期因子和上一期的相关系数，如果做的更细致，可以算滞后更多期的因子自相关系数。因子的自相关性主要是反映因子整体的稳定性，或者说因子的动量特征，如果因子的正自相关性很高，说明这个因子的持续性会很好，强者恒强，可以合理预期组合的换手会很低，负相关性很高则反之。

### 信息系数 (Information Coefficient, IC)

代表因子预测股票收益的能力。IC的计算方法是：计算全部股票在调仓周期期初排名和调仓周期期末收益排名的线性相关度(Correlation)。IC越大的因子，选股能力就越强。

IC最大值为1，表示该因子选股100%准确，对应的是排名分最高的股票，选出来的股票在下个调仓周期中，涨幅最大；相反，如果IC值为-1，则代表排名分最高的股票，在下个调仓周期中跌幅最大。反向的指标也是非常有意义的，最无用的IC值是0或者接近0的值，这代表该因子对于股票没有任何的预测能力。

### 信息比率 (Information Ratio, IR)

IC的多周期均值/IC的标准方差，代表因子获取稳定Alpha的能力。整个回测时段由多个调仓周期组成，每一个周期都会计算出一个不同的IC值，IR等于多个调仓周期的IC均值除以这些IC的标准方差。所以IR兼顾了因子的选股能力（由IC代表）和因子选股能力的稳定性（由IC的标准方差的倒数代表）。

### 夏普(sharpe)

夏普比率代表了收益的稳定性：一段时间内（通常是1年）所获得的收益扣除掉无风险利率之后，和收益曲线波动率的商，公式为：sharp =（annual_return - fixed_return） / annual_volatility

其中annual_return为因子/策略的年化收益，annual_volatility为因子/策略的年化波动率，而fixed_return为无风险利率，一般上采用**10年期国债收益率**作为基准。公式的分子收益率部分衡量了收益，分母部分则衡量了风险，这个公式综合地把风险和收益结合起来评价策略的优劣，是市场上最主要的策略评价指标。



# 组合（？）

对于通过有效性检验的因子，将其组合起来一起使用，以对冲风险，并获得更全面的预测能力。组合的方式各种各样，有按权重组合的，也有按先后一轮一轮组合的，也有新式的用机器学习组合的。

机器学习上的一些特征选择的办法有 PCA，LASSO，决策树等，其实本质上也还是挑选因子，并赋予权重。

### 截面策略？？

截面策略通常是指在某个时间点，对一组资产或证券进行选择和投资的策略。这种策略的核心是基于某些特定因素或指标来选择投资标的，而不是基于它们的长期表现或基本面。

- 截面多空策略：通过一些因子的判断，如基本面因子或量价因子，来判断两组品种的相对强弱关系，通过做多一组强势品种的同时做空另一组弱势品种，以保证两个方向盈利之和为正的策略
- 截面动量策略：通过多空组合获得收益，盈利来源可以用风险补偿或市场行为偏差解释
- CTA截面策略：一种基于风险分散的截面多空策略

### 组合评估指标

评估指标一般有：Sharp、最大回撤、索提诺比率比率。组合收益率计算上，可以对比等权和市值加权等等

### 信号？？？

一个 naive 的猜想，通过组合后的因子对股票进行打分。（按设定的调仓频率？？？）根据打分后的结果，按照一个比例（如前30%）买进评分高的股票。此时的权重一般是通过使用流通市值或者是总市值进行加权而得出，然后再卖空对应的股指期货进行套利，从而赚取价差。



# 风险控制???



# 组合优化

拿到了 Alpha 因子生成的信号后，再结合风控模型，市场冲击模型等，将其表达成一个最优化问题，计算得出一个明确的下单信号（时间，数量，价格）



# 下单

下单/拆单/算法交易(algorithm trading) 指收到明确的下单请求后执行下单的这一过程。会通过一些技术手段尽量以较划算的价格买入或卖出。衡量其优劣的参数一般有滑点等。



